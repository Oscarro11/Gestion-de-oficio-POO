<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ingresar Codigo</title>
    <link rel="stylesheet" href="IngresoCodigo.css">
</head>
<body>
    <div class="login-box">
        <img src="../../../assets/images/Logo.png" alt="Logo" class="logo">
        <h2>Ingresar Codigo</h2>
        <form id = "identification-form">
            <label for="codigo">Ingresa tu codigo</label>
            <input type="text" id="codigo" name="codigo" required>

            <input type="submit" value="Ingresar">
        </form>
        <p class="link">    
            ¿No tienes un código? <a href="../Login_cuenta/Principal.html">Haz click aquí</a>
        </p>
    </div>

    <script>
        const form1 = document.getElementById("identification-form");

        form1.addEventListener("submit", event => {
            event.preventDefault();

            const codigo = document.getElementById("codigo");

            fetch("http://localhost:8080/api/workers/setActiveWorkerFromGuest", {
                method: "POST",
                credentials: "include",
                headers: {
                    'Content-Type': 'application/json'
                },
                body: codigo.value
            })
            .then(async response => {
                return await response.text();
            })
            .then(data => {
                if (data == "true") {
                    window.location.href = "../../MenuCompartido/MenuWorkGroupAjeno/menuActiveWorkGroup.html"
                }
                else{
                    alert("El codigo ingresado no corresponde con ninguno de los del sistema. Intentelo de nuevo");
                }
            })
        })
    </script>
</body>
</html>